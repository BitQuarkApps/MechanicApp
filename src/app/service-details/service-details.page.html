<ion-header translucent="true" no-border>
  <ion-toolbar>
    <ion-button fill="clear" start (click)="leave()" color="dark">
      <ion-ripple-effect></ion-ripple-effect>
      Cerrar
    </ion-button>
    <ion-title>Taller Don Juan</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen="true">
  <ion-fab color="success" vertical="bottom" horizontal="end" slot="fixed" (click)="call(9612387823)">
    <ion-fab-button>
      <ion-ripple-effect></ion-ripple-effect>
      <ion-icon name="call"></ion-icon>
    </ion-fab-button>
  </ion-fab>
  <div padding>
    <ion-grid fixed>
      <ion-row>
        <ion-col size="12">
          <ion-segment [(ngModel)]="currentSegment" value="map">
            <ion-segment-button value="map">
              <ion-label>Ubicación</ion-label>
              <ion-icon name="pin"></ion-icon>
            </ion-segment-button>
            <ion-segment-button value="about">
              <ion-label>Información</ion-label>
              <ion-icon name="information-circle"></ion-icon>
            </ion-segment-button>
            <ion-segment-button value="comments">
              <ion-label>Opiniones</ion-label>
              <ion-icon name="text"></ion-icon>
            </ion-segment-button>
          </ion-segment>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
  
  <div>
    <div class="full-size" [hidden]="currentSegment != 'map'">
      <div id="taller-map">
        
      </div>
    </div>
    
    <div class="full-size" [hidden]="currentSegment != 'about'">
      <div padding>
        <ion-grid fixed>
          <ion-row>
            <ion-col size="12">
              <ion-card>
                <ion-card-header>
                  <ion-card-subtitle>Valoración</ion-card-subtitle>
                  <ion-card-title>
                    <ion-icon name="star" class="star"></ion-icon>
                    <ion-icon name="star" class="star"></ion-icon>
                    <ion-icon name="star" class="star"></ion-icon>
                    <ion-icon name="star" class="star"></ion-icon>
                    <ion-icon name="star-half" class="star"></ion-icon>
                  </ion-card-title>
                </ion-card-header>
              </ion-card>
            </ion-col>
            <ion-col size="12">
              <ion-card>
                <ion-card-header>
                  <ion-card-subtitle>Dirección del taller</ion-card-subtitle>
                  <ion-card-title>Avenida Salvador Urbina, Colonia Bienestar Social; Tuxtla Gutiérrez</ion-card-title>
                </ion-card-header>
              </ion-card>
            </ion-col>
            <ion-col size="12">
              <h1>Conoce el lugar:</h1>
              <br>
              <ion-card>
                <img src="https://blog.reparacion-vehiculos.es/hs-fs/hubfs/Imágenes_Post/Julio%202018/errores%20cambio-aceite.jpg?width=800&name=errores%20cambio-aceite.jpg" alt="">
              </ion-card>
              <ion-card>
                <img src="http://carclubfirestonecr.com/wp-content/uploads/2015/10/cambio-llantas1.jpg" alt="">
              </ion-card>
            </ion-col>
            <ion-col size="12">
              <ion-card>
                <ion-card-header>
                  <ion-card-subtitle>Horarios de apertura</ion-card-subtitle>
                  <ion-card-title></ion-card-title>
                  <ion-card-content>
                    <ion-list>
                      <ion-item>
                        <ion-label>Lunes</ion-label>
                        <ion-label>08:00am a 17:00pm</ion-label>
                      </ion-item>
                    </ion-list>
                  </ion-card-content>
                </ion-card-header>
              </ion-card>
            </ion-col>
            <ion-col size="12">
              <ion-card>
                <ion-card-header>
                  <ion-card-subtitle>Encargado del taller</ion-card-subtitle>
                  <ion-card-title>Juan Pérez</ion-card-title>
                </ion-card-header>
              </ion-card>
            </ion-col>
            <ion-col size="12">
              <ion-card>
                <ion-card-header>
                  <ion-card-subtitle>Servicios que ofrece</ion-card-subtitle>
                  <ion-card-content>
                    <ion-list>
                      <ion-item>
                        <ion-label>Alineación y Balanceo</ion-label>
                      </ion-item>
                      <ion-item>
                        <ion-label>Aire acondicionado</ion-label>
                      </ion-item>
                      <ion-item>
                        <ion-label>Cajas de velocidad</ion-label>
                      </ion-item>
                    </ion-list>
                  </ion-card-content>
                </ion-card-header>
              </ion-card>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
    </div>
    
    <div class="full-size" [hidden]="currentSegment != 'comments'">
      <div padding>
        <ion-grid fixed>
          <ion-row>
            <ion-col size="12">
              <form [formGroup]='commentFormGroup'>
                <ion-card>
                  <ion-card-header>
                    <ion-card-subtitle>Valoración</ion-card-subtitle>
                    <ion-card-title>
                      <rating formControlName="rate"
                      readonly="false"
                      size="default">
                    </rating>
                  </ion-card-title>
                  <ion-card-content>
                    <ion-grid fixed>
                      <ion-row>
                        <ion-col size="10">
                          <ion-textarea formControlName="comment" style="border-bottom: solid 1px #488aff !important" placeholder="Escribe tu opinión acerca de este taller"></ion-textarea>
                        </ion-col>
                        <ion-col size="2">
                          <ion-button [disabled]="commentFormGroup.invalid" (click)="eval()">
                            <ion-icon slot="icon-only" name="send"></ion-icon>
                          </ion-button>
                        </ion-col>
                      </ion-row>
                    </ion-grid>
                  </ion-card-content>
                </ion-card-header>
              </ion-card>
            </form>
          </ion-col>
          <ion-col size="12" *ngFor="let comentario of comentarios">
            <ion-card>
              <ion-card-header>
                <ion-icon name="star" class="star" *ngFor="let estrella of [].constructor(comentario.valoracion)"></ion-icon>
              </ion-card-header>
              <ion-card-content>
                {{ comentario.mensaje }}
                <br>
                <small>- {{ comentario.autor }}</small>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </div>
  
</div>
</ion-content>